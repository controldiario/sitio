<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Panel Administrador</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#f1f5f9;
}
header{
  background:#0f172a;
  color:white;
  padding:15px 20px;
  font-size:20px;
}
.container{
  padding:20px;
  max-width:1000px;
  margin:auto;
}
.card{
  background:white;
  padding:20px;
  border-radius:14px;
  box-shadow:0 10px 25px rgba(0,0,0,.1);
  margin-bottom:20px;
}
h2{margin-top:0;color:#2563eb;}

.form{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.form input{
  padding:10px;
  border-radius:8px;
  border:1px solid #cbd5f5;
}
.form button{
  grid-column:1/3;
  padding:12px;
  background:#2563eb;
  color:white;
  border:none;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
}

.products{
  display:grid;
  gap:15px;
}
.product{
  display:grid;
  grid-template-columns:80px 1fr 120px 120px 80px;
  align-items:center;
  gap:10px;
}
.product img{
  width:70px;
  height:70px;
  object-fit:cover;
  border-radius:8px;
  border:1px solid #e5e7eb;
}
.product input{
  padding:8px;
}
.btn{
  padding:8px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.save{background:#16a34a;color:white;}
.del{background:#dc2626;color:white;}
.logout{
  background:#0f172a;
  color:white;
  padding:10px 16px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>
<body>

<script>
if(localStorage.getItem("ADMIN_AUTH")!=="true"){
  window.location.href="admin.html";
}
</script>

<header>
  Panel Administrador
</header>

<div class="container">

  <!-- AGREGAR PRODUCTO -->
  <div class="card">
    <h2>âž• Nuevo producto</h2>
    <div class="form">
      <input id="name" placeholder="Nombre del producto">
      <input id="price" placeholder="Precio">
      <input id="cat" placeholder="CategorÃ­a">
      <input type="file" id="img">
      <button onclick="addProduct()">Guardar producto</button>
    </div>
  </div>

  <!-- LISTA -->
  <div class="card">
    <h2>ðŸ“¦ Productos</h2>
    <div class="products" id="list"></div>
  </div>

  <button class="logout" onclick="logout()">Cerrar sesiÃ³n</button>
</div>

<script>
let productos = JSON.parse(localStorage.getItem("PRODUCTS")) || [];

function save(){
  localStorage.setItem("PRODUCTS",JSON.stringify(productos));
}

function addProduct(){
  const file = img.files[0];
  if(!file){alert("Selecciona una imagen");return;}

  const reader = new FileReader();
  reader.onload = () => {
    productos.push({
      name:name.value,
      price:parseFloat(price.value),
      cat:cat.value,
      img:reader.result
    });
    save();
    render();
    name.value=price.value=cat.value="";
    img.value="";
  };
  reader.readAsDataURL(file);
}

function render(){
  list.innerHTML="";
  productos.forEach((p,i)=>{
    list.innerHTML+=`
    <div class="product">
      <img src="${p.img}">
      <input value="${p.name}" onchange="productos[${i}].name=this.value;save()">
      <input value="${p.price}" onchange="productos[${i}].price=parseFloat(this.value);save()">
      <button class="btn save" onclick="save()">ðŸ’¾</button>
      <button class="btn del" onclick="del(${i})">ðŸ—‘</button>
    </div>`;
  });
}

function del(i){
  if(confirm("Eliminar producto?")){
    productos.splice(i,1);
    save();
    render();
  }
}

function logout(){
  localStorage.removeItem("ADMIN_AUTH");
  window.location.href="admin.html";
}

render();
</script>

</body>
</html>
